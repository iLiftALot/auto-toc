/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var m=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var k=(t,e)=>{for(var n in e)m(t,n,{get:e[n],enumerable:!0})},$=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of D(e))!x.call(t,o)&&o!==n&&m(t,o,{get:()=>e[o],enumerable:!(r=w(e,o))||r.enumerable});return t};var U=t=>$(m({},"__esModule",{value:!0}),t);var ee={};k(ee,{default:()=>l});module.exports=U(ee);var u={envPath:"/Users/nicholascorbin/Desktop/Knowledge/MyObsidian/ObsidianBackup/My Sync/.env",pluginRoot:"/Users/nicholascorbin/Desktop/Knowledge/MyObsidian/ObsidianBackup/My Sync/.obsidian/plugins/insta-toc",pluginManifest:{id:"insta-toc",name:"Insta TOC",version:"3.0.0",minAppVersion:"0.15.0",description:"Simultaneously generate, update, and maintain a table of contents for your notes.",author:"Nick C.",autherUrl:"https://github.com/iLiftALot/insta-toc",isDesktopOnly:!1},pluginSettingsPath:"/Users/nicholascorbin/Desktop/Knowledge/MyObsidian/ObsidianBackup/My Sync/.obsidian/plugins/insta-toc/data.json",pluginSettings:{},projectRoot:"/Users/nicholascorbin/Desktop/Knowledge/MyObsidian/ObsidianBackup/My Sync/.obsidian/plugins/insta-toc",vaultRoot:"/Users/nicholascorbin/Desktop/Knowledge/MyObsidian/ObsidianBackup/My Sync",vaultName:"My Sync"};var p=require("obsidian");var h={tocString:"> [!SUMMARY] Table of Contents",shouldGenToc:!1};var s={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")},ie={defaultMerge:s.defaultMerge};function V(t,e){return e}function L(t,e){return t.filter(n=>n!==void 0)}var y;(function(t){t[t.NOT=0]="NOT",t[t.RECORD=1]="RECORD",t[t.ARRAY=2]="ARRAY",t[t.SET=3]="SET",t[t.MAP=4]="MAP",t[t.OTHER=5]="OTHER"})(y||(y={}));function T(t){return typeof t!="object"||t===null?0:Array.isArray(t)?2:N(t)?1:t instanceof Set?3:t instanceof Map?4:5}function j(t){let e=new Set;for(let n of t)for(let r of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])e.add(r);return e}function G(t,e){return typeof t=="object"&&Object.prototype.propertyIsEnumerable.call(t,e)}function E(t){let e=0,n=t[0]?.[Symbol.iterator]();return{[Symbol.iterator](){return{next(){do{if(n===void 0)return{done:!0,value:void 0};let r=n.next();if(r.done===!0){e+=1,n=t[e]?.[Symbol.iterator]();continue}return{done:!1,value:r.value}}while(!0)}}}}}var b=["[object Object]","[object Module]"];function N(t){if(!b.includes(Object.prototype.toString.call(t)))return!1;let{constructor:e}=t;if(e===void 0)return!0;let n=e.prototype;return!(n===null||typeof n!="object"||!b.includes(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function B(t,e,n){let r={};for(let o of j(t)){let i=[];for(let f of t)G(f,o)&&i.push(f[o]);if(i.length===0)continue;let a=e.metaDataUpdater(n,{key:o,parents:t}),c=C(i,e,a);c!==s.skip&&(o==="__proto__"?Object.defineProperty(r,o,{value:c,configurable:!0,enumerable:!0,writable:!0}):r[o]=c)}return r}function Y(t){return t.flat()}function z(t){return new Set(E(t))}function K(t){return new Map(E(t))}function W(t){return t.at(-1)}var d={mergeRecords:B,mergeArrays:Y,mergeSets:z,mergeMaps:K,mergeOthers:W};function R(...t){return q({})(...t)}function q(t,e){let n=J(t,r);function r(...o){return C(o,n,e)}return r}function J(t,e){return{defaultMergeFunctions:d,mergeFunctions:{...d,...Object.fromEntries(Object.entries(t).filter(([n,r])=>Object.hasOwn(d,n)).map(([n,r])=>r===!1?[n,d.mergeOthers]:[n,r]))},metaDataUpdater:t.metaDataUpdater??V,deepmerge:e,useImplicitDefaultMerging:t.enableImplicitDefaultMerging??!1,filterValues:t.filterValues===!1?void 0:t.filterValues??L,actions:s}}function C(t,e,n){let r=e.filterValues?.(t,n)??t;if(r.length===0)return;if(r.length===1)return M(r,e,n);let o=T(r[0]);if(o!==0&&o!==5){for(let i=1;i<r.length;i++)if(T(r[i])!==o)return M(r,e,n)}switch(o){case 1:return Q(r,e,n);case 2:return X(r,e,n);case 3:return Z(r,e,n);case 4:return _(r,e,n);default:return M(r,e,n)}}function Q(t,e,n){let r=e.mergeFunctions.mergeRecords(t,e,n);return r===s.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeRecords!==e.defaultMergeFunctions.mergeRecords?e.defaultMergeFunctions.mergeRecords(t,e,n):r}function X(t,e,n){let r=e.mergeFunctions.mergeArrays(t,e,n);return r===s.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeArrays!==e.defaultMergeFunctions.mergeArrays?e.defaultMergeFunctions.mergeArrays(t):r}function Z(t,e,n){let r=e.mergeFunctions.mergeSets(t,e,n);return r===s.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeSets!==e.defaultMergeFunctions.mergeSets?e.defaultMergeFunctions.mergeSets(t):r}function _(t,e,n){let r=e.mergeFunctions.mergeMaps(t,e,n);return r===s.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeMaps!==e.defaultMergeFunctions.mergeMaps?e.defaultMergeFunctions.mergeMaps(t):r}function M(t,e,n){let r=e.mergeFunctions.mergeOthers(t,e,n);return r===s.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeOthers!==e.defaultMergeFunctions.mergeOthers?e.defaultMergeFunctions.mergeOthers(t):r}function P(t,e){let n=null;return function(...r){n!==null&&clearTimeout(n),n=window.setTimeout(()=>{t.apply(this,r),n=null},e)}}var v="insta-toc",g=class{constructor(e,n,r,o){this.app=e,this.plugin=n,this.editor=r,this.file=o,this.fileCache=this.app.metadataCache.getFileCache(o),this.fileCache&&this.updateAutoToc()}getTocInsertPosition(e){let n=e.position.start.line,r=0,o=e.position.end.line,i=e.position.end.col;return{from:{line:n,ch:r},to:{line:o,ch:i}}}generateToc(e){let n=[];e.length>0&&e.forEach(o=>{let i=o.level,a=o.heading,c=`${" ".repeat((i-1)*4)}- ${a}`;n.push(c)});let r=n.join(`
`);return`\`\`\`${v}
${r}
\`\`\``}getTocData(){let e=this.fileCache?.headings??[],n=this.fileCache?.sections?this.fileCache.sections.find(r=>r.type==="code"&&this.editor.getLine(r.position.start.line)===`\`\`\`${v}`):void 0;return{fileHeadings:e,instaTocSection:n}}updateAutoToc(){let{fileHeadings:e,instaTocSection:n}=this.getTocData();if(!n)return;let r=this.getTocInsertPosition(n),o=this.generateToc(e);this.editor.replaceRange(o,r.from,r.to)}};var l=class extends p.Plugin{constructor(e,n){let r=n??u.pluginManifest;super(e,r),this.app=e}async onload(){console.log("Loading Insta TOC Plugin"),await this.loadSettings(),this.registerMarkdownCodeBlockProcessor("insta-toc",async(e,n,r)=>{let o=r.sourcePath,i=o.substring(0,o.lastIndexOf(".")),a=/^(\s*)-\s*(.*)/,f=e.split(`
`).map(S=>{let F=S.match(a);if(!F)return S;let[,O,I]=F,A=`${i}#${I}`;return`${O}- [[${A}|${I}]]`}).join(`
`);await p.MarkdownRenderer.render(this.app,f,n,o,this)}),this.registerEvent(this.app.vault.on("modify",P(this.handleEditorChange.bind(this),2e3)))}onunload(){console.log("Unloading Insta TOC Plugin")}async loadSettings(){let e=h,n=await this.loadData();n&&(e=R(h,n)),this.settings=e}async saveSettings(){await this.saveData(this.settings)}async handleEditorChange(){let e=this.app.workspace.activeEditor,n=e?.editor,r=e?.file??void 0;!e||!n||!r||new g(this.app,this,n,r)}};
